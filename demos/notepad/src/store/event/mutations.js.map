{"version":3,"sources":["../../../../src/store/event/mutations.js"],"names":["type","func","ADDEVENT","states","payload","count","items","id","event","unshift","local","set","EVENTTODO","i","length","time","getDate","item","splice","EVENTDONE","EVENTCANCEL","CLEAREVENT","clear","DELEVENT","console","dir","index","filter","d","EDITEVENT","content","evnet"],"mappings":"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","file":"mutations.js","sourcesContent":["/**\n * Created by jerry on 2017/5/15.\n */\nimport * as type from './mutations_types'\nimport * as func from '../function'\n\n// states这个对象里包含两个属性：event 和 count\n\nexport default {\n  [type.ADDEVENT] (states, payload) {\n    states.count++ // 取数据库中count计数器+1\n    payload.items.id = states.count // 新增事件的id号为流水号\n    states.event.unshift(payload.items) // 将新增事件放在数据的第一个元素\n    func.local.set(states)\n  },\n  [type.EVENTTODO] (states, payload) {\n    for (let i = 0; i < states.event.length; i++) {\n      if (states.event[i].id === payload.id) {\n        states.event[i].type = 1  // todo的状态为1\n        states.event[i].time = func.getDate()\n        var item = states.event[i]\n        states.event.splice(i, 1)\n        break\n      }\n    }\n    states.event.unshift(item)\n    func.local.set(states)\n  },\n  [type.EVENTDONE] (states, payload) {\n    for (let i = 0; i < states.event.length; i++) {\n      if (states.event[i].id === payload.id) {\n        states.event[i].type = 2  // done的状态为2\n        states.event[i].time = func.getDate()\n        var item = states.event[i] // 这里我想用let，但发现需要用var提升变量在循环外层使用，后期再看。\n        states.event.splice(i, 1)\n        break\n      }\n    }\n    states.event.unshift(item)\n    func.local.set(states)\n  },\n  [type.EVENTCANCEL] (states, payload) {\n    for (let i = 0; i < states.event.length; i++) {\n      if (states.event[i].id === payload.id) {\n        states.event[i].type = 3  // cancel的状态为3\n        states.event[i].time = func.getDate()\n        var item = states.event[i]\n        states.event.splice(i, 1)\n        break\n      }\n    }\n    states.event.unshift(item)\n    func.local.set(states)\n  },\n  [type.CLEAREVENT] (states) {\n    states.event = []\n    func.local.clear()\n  },\n  [type.DELEVENT] (states, payload) {\n    console.dir(payload)\n    if (states.event[payload.index].id === payload.id) {\n      states.event.splice(payload.index, 1)\n    } else {\n      states.event.filter((d, i) => {\n        if (d.id === payload.id) {\n          states.event.splice(i, 1)\n        }\n      })\n    }\n    func.local.set(states)\n  },\n  [type.EDITEVENT] (states, payload) {\n    if (states.event[payload.index].id === payload.id) {\n      states.event[payload.index].content = payload.content\n    } else {\n      states.evnet.filter((d) => {\n        if (d.id) {\n          d.content = payload.content\n        }\n      })\n    }\n    func.local.set(states)\n  }\n}\n"]}